{% extends "wheeltunes_app/base.html" %}
{% block body_block %}

<h1>Determine Songs via (mocked) sensor input</h1>

<div class="container">
    <form action="#" method="POST">
        {% csrf_token %}
        <div class="row">
            <div class="col">
                <label for="customRange2" class="form-label">Speed (0-40mph)</label>
                <input type="range" class="form-range" id="speed_input" min="0" max="40" name="speed" value="0" oninput="speed_output.value = speed_input.value">
                <output for="customRange2" id="speed_output" class="form-label">0</output>
            </div>

            <div class="col">
                <label for="customRange2" class="form-label">Heart Rate (40-150bpm)</label>
                <input type="range" class="form-range" min="40" max="150" name="heart-rate" id="HR_input" oninput="HR_output.value = HR_input.value" value="0">
                <output for="customRange2" id="HR_output" class="form-label">40</output>
            </div>

            <div class="col">
                <label for="customRange2" class="form-label">Background Noise (0-80db)</label>
                <input type="range" class="form-range" min="0" max="80" name="background-noise" id="BN_input" oninput="BN_output.value = BN_input.value" value="0">
                <output for="customRange2" id="BN_output" class="form-label">0</output>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <h2>Songs most suited to current state:</h2>
    {% if sensor_data %}
        <p>Current sensor data: {{ sensor_data.heart_rate }}bpm, {{ sensor_data.speed }}mph, {{ sensor_data.background_noise }}db, {% if sensor_data.mood %}mood: {{ sensor_data.mood }}{% endif %}</p>
        <p>Showing songs with tempo range <strong>{{ lower_offset }}bpm</strong> to <strong>{{ upper_offset }}bpm</strong></p>
    {% endif %}
    <ul>
    {% for song in playable_songs %}
        <li> {{ song }}</li>
    {% endfor %}
    </ul>
</div>
{% endblock %}